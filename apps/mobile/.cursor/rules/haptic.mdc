---
alwaysApply: true
---

# Haptic Feedback Rules for EduTime Native

## ðŸš« Never Do This
```typescript
// âŒ Direct haptic calls without platform checks
Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);

// âŒ Inconsistent haptic usage
Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light); // In one place
HapticFeedback.light(); // In another place

// âŒ Missing haptic feedback for important interactions
const handleButtonPress = () => {
  // No haptic feedback
  onPress();
};

// âŒ Using wrong haptic types
Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success); // For button press
```

## âœ… Always Do This
```typescript
// âœ… Use the centralized HapticFeedback utility
import { HapticFeedback } from '@/lib/haptics';

const handleButtonPress = () => {
  HapticFeedback.light();
  onPress();
};

// âœ… Use appropriate haptic types for different interactions
HapticFeedback.light();     // Button presses, selections
HapticFeedback.medium();    // Important actions
HapticFeedback.heavy();    // Critical actions
HapticFeedback.success();   // Successful operations
HapticFeedback.error();     // Error states
HapticFeedback.warning();   // Warning states
HapticFeedback.selection(); // Picker changes, tab switches
```

## ðŸ“ Files to Always Touch for Haptic Feedback

### 1. **Core Haptic Files**
- `lib/haptics.ts` - Centralized haptic feedback utility
- `components/HapticTab.tsx` - Tab bar haptic wrapper

### 2. **Component Files** (When adding haptic feedback)
- `components/**/*.tsx` - All interactive components
- `app/**/*.tsx` - All screens with user interactions
- `components/RecordForm/**/*.tsx` - Form interactions
- `components/settings/**/*.tsx` - Settings interactions

## ðŸ—ï¸ Haptic Feedback Patterns

### 1. **Button Interactions**
```typescript
// âœ… Light haptic for button presses
const handleButtonPress = () => {
  HapticFeedback.light();
  onPress();
};

// âœ… Medium haptic for important buttons
const handleSave = () => {
  HapticFeedback.medium();
  saveData();
};
```

### 2. **Form Interactions**
```typescript
// âœ… Selection haptic for picker changes
const handlePickerChange = (value: string) => {
  HapticFeedback.selection();
  setValue(value);
};

// âœ… Light haptic for input focus
const handleInputFocus = () => {
  HapticFeedback.light();
  onFocus();
};
```

### 3. **Navigation Interactions**
```typescript
// âœ… Light haptic for navigation
const handleNavigation = () => {
  HapticFeedback.light();
  router.push('/screen');
};

// âœ… Selection haptic for tab switches
const handleTabPress = () => {
  HapticFeedback.selection();
  setActiveTab(tab);
};
```

### 4. **Success/Error Feedback**
```typescript
// âœ… Success haptic for successful operations
const handleSuccess = () => {
  HapticFeedback.success();
  showSuccessToast('Operation completed');
};

// âœ… Error haptic for error states
const handleError = () => {
  HapticFeedback.error();
  showErrorToast('Operation failed');
};

// âœ… Warning haptic for warnings
const handleWarning = () => {
  HapticFeedback.warning();
  showWarningToast('Please check your input');
};
```

## ðŸŽ¯ Common Haptic Patterns

### 1. **Button Presses**
```typescript
// âœ… Primary buttons
<Button onPress={() => {
  HapticFeedback.light();
  handlePress();
}}>
  Save
</Button>

// âœ… Secondary buttons
<Button onPress={() => {
  HapticFeedback.light();
  handleCancel();
}}>
  Cancel
</Button>
```

### 2. **Form Interactions**
```typescript
// âœ… Input focus
<Input onFocus={() => {
  HapticFeedback.light();
}} />

// âœ… Picker changes
<Picker onValueChange={(value) => {
  HapticFeedback.selection();
  setValue(value);
}} />
```

### 3. **List Interactions**
```typescript
// âœ… List item selection
<TouchableOpacity onPress={() => {
  HapticFeedback.light();
  selectItem(item);
}}>
  <Text>{item.title}</Text>
</TouchableOpacity>
```

### 4. **Modal Interactions**
```typescript
// âœ… Modal open/close
const openModal = () => {
  HapticFeedback.light();
  setModalVisible(true);
};

const closeModal = () => {
  HapticFeedback.light();
  setModalVisible(false);
};
```

## ðŸ”§ Implementation Guidelines

### 1. **Haptic Types Usage**
```typescript
// âœ… Use appropriate haptic types
HapticFeedback.light();     // Button presses, selections, navigation
HapticFeedback.medium();    // Important actions, form submissions
HapticFeedback.heavy();     // Critical actions, deletions
HapticFeedback.selection(); // Picker changes, tab switches
HapticFeedback.success();   // Successful operations
HapticFeedback.error();     // Error states
HapticFeedback.warning();   // Warning states
```

### 2. **Platform Considerations**
```typescript
// âœ… The HapticFeedback utility handles platform checks
// âœ… Use HapticFeedback instead of direct Haptics calls
HapticFeedback.light(); // Automatically checks Platform.OS === 'ios'

// âŒ Don't use direct Haptics calls
Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);
```

### 3. **Performance Considerations**
```typescript
// âœ… Debounce haptic feedback for rapid interactions
const handleRapidPress = () => {
  const now = Date.now();
  if (now - lastHapticTime < 100) return; // Debounce
  lastHapticTime = now;
  HapticFeedback.light();
};
```

## âš ï¸ Critical Rules

1. **Always use HapticFeedback utility** - Never use direct Haptics calls
2. **Use appropriate haptic types** - Match haptic intensity to interaction importance
3. **Add haptic to all interactions** - Button presses, selections, navigation
4. **Consider user experience** - Don't overuse haptics, debounce rapid interactions
5. **Test on device** - Haptics only work on physical devices, not simulators

## ðŸ” Files That Need Haptic Attention

Based on your codebase, these files commonly need haptic feedback:
- `components/RecordForm/RecordForm.tsx` - Form interactions âœ… (already implemented)
- `components/StopWatchButton.tsx` - Timer interactions âœ… (already implemented)
- `app/(app)/index.tsx` - Main screen interactions âœ… (already implemented)
- `components/WeekdayPicker.tsx` - Picker interactions âœ… (already implemented)
- `components/settings/*.tsx` - Settings interactions
- `components/RecordList.tsx` - List interactions

## ðŸš€ Quick Checklist

When adding haptic feedback:
- [ ] Import `HapticFeedback` from `@/lib/haptics`
- [ ] Use appropriate haptic type for the interaction
- [ ] Add haptic to button presses
- [ ] Add haptic to form interactions
- [ ] Add haptic to navigation
- [ ] Add haptic to success/error states
- [ ] Test on physical device
- [ ] Consider debouncing for rapid interactions

## ðŸ“Š Haptic Feedback Quality Score

**Current Status: 8/10**
- âœ… Good use of centralized HapticFeedback utility
- âœ… Appropriate haptic types for different interactions
- âœ… Good coverage in main components
- âš ï¸ Some components may need haptic feedback
- âš ï¸ Could benefit from more consistent usage patterns
- âš ï¸ Missing haptic feedback in some settings components

## ðŸŽ¯ Haptic Usage Examples

### **Button Interactions:**
```typescript
// Primary action
<Button onPress={() => {
  HapticFeedback.medium();
  handleSave();
}}>Save</Button>

// Secondary action
<Button onPress={() => {
  HapticFeedback.light();
  handleCancel();
}}>Cancel</Button>
```

### **Form Interactions:**
```typescript
// Input focus
<Input onFocus={() => HapticFeedback.light()} />

// Picker change
<Picker onValueChange={() => HapticFeedback.selection()} />
```

### **Navigation:**
```typescript
// Tab switch
const handleTabPress = () => {
  HapticFeedback.selection();
  setActiveTab(tab);
};

// Screen navigation
const handleNavigate = () => {
  HapticFeedback.light();
  router.push('/screen');
};
```

### **Success/Error States:**
```typescript
// Success
const handleSuccess = () => {
  HapticFeedback.success();
  showSuccessToast('Saved successfully');
};

// Error
const handleError = () => {
  HapticFeedback.error();
  showErrorToast('Save failed');
};
```