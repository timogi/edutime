---
alwaysApply: true
---

# Project Conventions

## Framework & UI Library

**We use Mantine whenever possible.** All UI components should be built using Mantine components as the base. Components should inherit from Mantine components rather than creating custom HTML elements.

## Theming

**We have a dark and light theme.** The theme is managed through Mantine's `useMantineColorScheme` hook and theme system.

### Color Usage

**Colors are meant to be used via theme.** All colors should reference theme variables, not hardcoded values.

- **Primary actions**: Use the primary color (violet) or omit the color prop to use default primary
- **Buttons**: Should use `color` prop with theme color names (e.g., `color="primary"` or default primary), exceptions only in special cases
- **Text colors**: Use `var(--mantine-color-text)`, `var(--mantine-color-dimmed)`, etc.
- **Background colors**: Use `var(--mantine-color-body)`, `var(--mantine-color-white)`, etc.
- **Theme access**: Prefer CSS variables (`var(--mantine-color-*)`) over direct theme object access (`theme.colors.*`)
- **Exceptions**: Only use hardcoded colors in special cases (e.g., category-specific colors stored in database, PDF rendering where theme variables aren't available)

### Theme Variables

**Prefer CSS variables for static styles:**
- `var(--mantine-color-body)` - Main background color
- `var(--mantine-color-text)` - Primary text color
- `var(--mantine-color-dimmed)` - Dimmed/secondary text color
- `var(--mantine-color-border)` - Border color
- `var(--mantine-color-white)` - White color
- `var(--mantine-color-black)` - Black color
- `var(--mantine-color-gray-*)` - Gray scale colors
- `var(--mantine-color-dark-*)` - Dark mode specific colors
- `var(--mantine-color-primary)` - Primary color (violet)

For dark/light mode differences in CSS files, use CSS `light-dark()` function:
```css
background-color: light-dark(var(--mantine-color-white), var(--mantine-color-dark-7));
```

**For dynamic runtime color selection**, using `theme.colors` directly is acceptable:
- When colors need to change based on `colorScheme` at runtime
- When colors are computed dynamically in JavaScript/TypeScript
- Example: `theme.colors.gray[0]` for dynamic text color based on colorScheme

## Internationalization (i18n)

**We use i18n for all user-facing text.** 

- Use `next-intl` with `useTranslations` hook
- Translation keys are stored in `messages/{locale}.json` files
- Supported locales: `en`, `de`, `fr`
- Always use `useTranslations('Index')` or appropriate namespace for translations
- Never hardcode user-facing strings

## Data Access

**We use Supabase to get data.** All database operations should go through Supabase client utilities in `src/utils/supabase/`.

- Use Supabase client from `src/utils/supabase/client.ts`
- Create utility functions in `src/utils/supabase/` for data operations
- Use hooks like `useRecords`, `useDailyDuration` when available
- Handle errors appropriately
- Use Supabase real-time subscriptions when needed for live updates

## Component Patterns

1. **Inherit from Mantine**: Components should extend Mantine components
2. **Use theme variables**: Access colors through CSS variables, not direct theme object access
3. **Responsive**: Use Mantine's responsive utilities and hooks
4. **Accessible**: Follow Mantine's accessibility guidelines
5. **Consistent**: Use Mantine's sizing and spacing system

## Button Color Guidelines

- **Primary actions**: Omit `color` prop (uses primary) or use `color="primary"` 
- **Destructive actions**: Use `color="red"` (acceptable exception)
- **Secondary actions**: Use `color="gray"` or `variant="subtle"`
- **Cancel/Reset**: Use `color="gray"` or `variant="subtle"`

## Example Patterns

### Good: Using theme variables
```tsx
<Button variant="filled">Save</Button> // Uses primary color
<div style={{ backgroundColor: 'var(--mantine-color-body)' }} />
```

### Bad: Hardcoded colors
```tsx
<Button style={{ backgroundColor: '#violet' }}>Save</Button>
<div style={{ backgroundColor: '#ffffff' }} />
```

### Good: Using CSS variables in styles
```css
.myClass {
  background-color: var(--mantine-color-body);
  color: var(--mantine-color-text);
}
```

### Acceptable: Dynamic theme access for runtime color selection
```tsx
// When color needs to change based on colorScheme at runtime
const textColor = colorScheme === 'dark' ? theme.colors.gray[0] : theme.colors.gray[9]
// This is acceptable for dynamic color selection
```

### Bad: Hardcoded colors
```tsx
style={{ backgroundColor: '#ffffff' }}
style={{ color: 'rgb(255, 0, 0)' }}
// Should use theme colors instead
```
